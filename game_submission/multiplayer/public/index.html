<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenCity Mayor - Multiplayer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-container">
        <!-- Connection Screen -->
        <div id="connection-screen" class="screen active">
            <div class="connection-content">
                <h1 class="game-title">üèôÔ∏è GreenCity Mayor</h1>
                <h2 class="game-subtitle">Multiplayer - Th·ªã Tr∆∞·ªüng Th√†nh Ph·ªë Xanh</h2>
                <p class="game-description">
                    Ch∆°i c√πng b·∫°n b√®! 2-10 ng∆∞·ªùi ch∆°i. Th·ªã tr∆∞·ªüng ƒë·ªÅ xu·∫•t ch√≠nh s√°ch, m·ªçi ng∆∞·ªùi b·ªè phi·∫øu.
                </p>

                <div class="connection-form">
                    <input type="text" id="player-name" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n..." maxlength="20" required>

                    <div class="connection-buttons">
                        <button id="create-room-btn" class="btn btn-primary">üè† T·∫°o Ph√≤ng M·ªõi</button>
                        <div class="join-room-section">
                            <input type="text" id="room-code" placeholder="M√£ ph√≤ng (6 k√Ω t·ª±)" maxlength="6">
                            <button id="join-room-btn" class="btn btn-secondary">üö™ V√†o Ph√≤ng</button>
                        </div>
                    </div>
                </div>

                <div id="connection-status" class="connection-status hidden">
                    <div class="loading-spinner"></div>
                    <p>ƒêang k·∫øt n·ªëi...</p>
                </div>
            </div>
        </div>

        <!-- Lobby Screen -->
        <div id="lobby-screen" class="screen">
            <div class="lobby-content">
                <h2>üè† Ph√≤ng: <span id="room-id-display"></span></h2>
                <p class="lobby-description">Chia s·∫ª m√£ ph√≤ng cho b·∫°n b√® ƒë·ªÉ h·ªç tham gia!</p>

                <div id="players-list" class="players-list">
                    <h3>üë• Danh S√°ch Ng∆∞·ªùi Ch∆°i:</h3>
                    <div id="players-container"></div>
                </div>

                <div class="lobby-actions">
                    <button id="start-game-btn" class="btn btn-primary hidden">üéÆ B·∫Øt ƒê·∫ßu Game</button>
                    <button id="leave-room-btn" class="btn btn-secondary">üö™ R·ªùi Ph√≤ng</button>
                </div>

                <div class="game-rules">
                    <h4>üìã Lu·∫≠t Ch∆°i:</h4>
                    <ul>
                        <li>üèõÔ∏è Th·ªã tr∆∞·ªüng (ng·∫´u nhi√™n) ƒë·ªÅ xu·∫•t 1 trong 3 ch√≠nh s√°ch</li>
                        <li>üó≥Ô∏è C√°c ng∆∞·ªùi ch∆°i kh√°c b·ªè phi·∫øu: ƒê·ªìng √Ω / Kh√¥ng ƒë·ªìng √Ω / Phi·∫øu tr·∫Øng</li>
                        <li>‚è∞ Th·ªùi gian b·ªè phi·∫øu: 30 gi√¢y</li>
                        <li>üîÑ Th·ªã tr∆∞·ªüng thay ƒë·ªïi m·ªói nƒÉm</li>
                        <li>üéØ M·ª•c ti√™u: Duy tr√¨ 3 ch·ªâ s·ªë > 50 trong 10 nƒÉm</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <!-- Game Stats -->
            <div class="game-header">
                <div class="year-display">
                    <h2>NƒÉm <span id="current-year">1</span>/10</h2>
                </div>
                <div id="room-info" class="room-info">
                    Ph√≤ng: <span id="current-room-id"></span>
                </div>
            </div>

            <div class="stats-container">
                <div class="stats-grid">
                    <div class="stat-item economy">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <div class="stat-label">Kinh T·∫ø</div>
                            <div class="stat-value" id="economy-value">50</div>
                            <div class="stat-bar">
                                <div class="stat-fill economy" id="economy-bar" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-item environment">
                        <div class="stat-icon">üåø</div>
                        <div class="stat-info">
                            <div class="stat-label">M√¥i Tr∆∞·ªùng</div>
                            <div class="stat-value" id="environment-value">50</div>
                            <div class="stat-bar">
                                <div class="stat-fill environment" id="environment-bar" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-item happiness">
                        <div class="stat-icon">üòä</div>
                        <div class="stat-info">
                            <div class="stat-label">H·∫°nh Ph√∫c</div>
                            <div class="stat-value" id="happiness-value">50</div>
                            <div class="stat-bar">
                                <div class="stat-fill happiness" id="happiness-bar" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Players Status -->
            <div id="players-status" class="players-status">
                <h3>üë• Ng∆∞·ªùi Ch∆°i:</h3>
                <div id="players-status-list"></div>
            </div>

            <!-- Mayor Proposal Phase -->
            <div id="proposal-phase" class="game-phase hidden">
                <div class="phase-header">
                    <h3>üèõÔ∏è <span id="mayor-name"></span> ƒëang ƒë·ªÅ xu·∫•t ch√≠nh s√°ch...</h3>
                </div>

                <div id="mayor-cards" class="cards-container hidden">
                    <h4>Ch·ªçn m·ªôt ch√≠nh s√°ch ƒë·ªÉ ƒë·ªÅ xu·∫•t:</h4>
                    <div class="cards-grid" id="mayor-cards-grid">
                        <!-- Cards for mayor -->
                    </div>
                </div>

                <div id="waiting-proposal" class="waiting-message">
                    <div class="loading-spinner"></div>
                    <p>ƒêang ch·ªù th·ªã tr∆∞·ªüng ƒë·ªÅ xu·∫•t ch√≠nh s√°ch...</p>
                </div>
            </div>

            <!-- Voting Phase -->
            <div id="voting-phase" class="game-phase hidden">
                <div class="voting-header">
                    <h3>üó≥Ô∏è B·ªè Phi·∫øu Cho Ch√≠nh S√°ch</h3>
                    <div id="voting-timer" class="voting-timer">
                        <div class="timer-bar">
                            <div id="timer-fill" class="timer-fill"></div>
                        </div>
                        <span id="timer-text">30s</span>
                    </div>
                </div>

                <div class="proposed-policy">
                    <div id="proposed-policy-card" class="policy-card-display">
                        <!-- Proposed policy will be displayed here -->
                    </div>
                </div>

                <div id="voting-buttons" class="voting-buttons">
                    <button id="vote-approve" class="btn btn-vote btn-approve">
                        ‚úÖ ƒê·ªìng √ù
                    </button>
                    <button id="vote-reject" class="btn btn-vote btn-reject">
                        ‚ùå Kh√¥ng ƒê·ªìng √ù
                    </button>
                    <button id="vote-abstain" class="btn btn-vote btn-abstain">
                        ‚ö™ Phi·∫øu Tr·∫Øng
                    </button>
                </div>

                <div id="vote-status" class="vote-status">
                    <p>ƒê√£ b·ªè phi·∫øu: <span id="votes-count">0</span>/<span id="total-voters">0</span></p>
                    <div class="vote-progress">
                        <div class="vote-progress-bar"></div>
                    </div>
                </div>
            </div>

            <!-- Results Phase -->
            <div id="results-phase" class="game-phase hidden">
                <div class="results-header">
                    <h3>üìä K·∫øt Qu·∫£ B·ªè Phi·∫øu</h3>
                </div>

                <div id="vote-results" class="vote-results">
                    <!-- Vote results will be displayed here -->
                </div>

                <div id="policy-effect" class="policy-effect">
                    <!-- Policy effects will be shown here -->
                </div>
            </div>
        </div>

        <!-- Game End Screen -->
        <div id="end-screen" class="screen">
            <div class="end-content">
                <div id="victory-screen" class="result-screen hidden">
                    <h1 class="result-title victory">üéâ Chi·∫øn Th·∫Øng!</h1>
                    <p class="result-message">
                        Ch√∫c m·ª´ng! T·∫•t c·∫£ c√°c th·ªã tr∆∞·ªüng ƒë√£ h·ª£p t√°c th√†nh c√¥ng ph√°t tri·ªÉn GreenCity b·ªÅn v·ªØng!
                    </p>
                </div>

                <div id="defeat-screen" class="result-screen hidden">
                    <h1 class="result-title defeat">üíî Th·∫•t B·∫°i</h1>
                    <p class="result-message" id="defeat-message"></p>
                </div>

                <div class="final-stats">
                    <h3>üìä K·∫øt Qu·∫£ Cu·ªëi C√πng:</h3>
                    <div class="final-stats-grid">
                        <div>üí∞ Kinh T·∫ø: <span id="final-economy">0</span></div>
                        <div>üåø M√¥i Tr∆∞·ªùng: <span id="final-environment">0</span></div>
                        <div>üòä H·∫°nh Ph√∫c: <span id="final-happiness">0</span></div>
                    </div>
                </div>

                <div class="end-buttons">
                    <button id="new-game-btn" class="btn btn-primary">üéÆ Game M·ªõi</button>
                    <button id="back-to-lobby-btn" class="btn btn-secondary">üè† V·ªÅ Lobby</button>
                </div>
            </div>
        </div>

        <!-- Error Modal -->
        <div id="error-modal" class="modal hidden">
            <div class="modal-content">
                <h3>‚ö†Ô∏è L·ªói</h3>
                <p id="error-message"></p>
                <button id="error-ok-btn" class="btn btn-secondary">OK</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="multiplayer-script.js"></script>
</body>
</html>
